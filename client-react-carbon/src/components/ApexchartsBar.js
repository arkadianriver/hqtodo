import React, { Component } from "react";
import Chart from "react-apexcharts";

class ApexchartsBar extends Component {
  constructor(props) {
    super(props);

    this.state = {
      options: {
        chart: {
          id: "bar",
          stacked: true,
        },
        dataLabels: {
          enabled: false,
        },
        xaxis: {
          type: "datetime",
        },
        legend: {
          showForSingleSeries: true,
          position: 'top',
          horizontalAlign: 'left'
        },
      },
      series: [
        {
          name: "",
          data: [] // [{"x":"2021-01-07","y":"0.00"},{"x":"2021-01-08","y":0},{"x":"2021-01-09","y":0},{"x":"2021-01-10","y":0},{"x":"2021-01-11","y":0},{"x":"2021-01-12","y":0},{"x":"2021-01-13","y":0},{"x":"2021-01-14","y":0},{"x":"2021-01-15","y":0},{"x":"2021-01-16","y":0},{"x":"2021-01-17","y":0},{"x":"2021-01-18","y":0},{"x":"2021-01-19","y":0},{"x":"2021-01-20","y":0},{"x":"2021-01-21","y":0},{"x":"2021-01-22","y":0},{"x":"2021-01-23","y":0},{"x":"2021-01-24","y":0},{"x":"2021-01-25","y":0},{"x":"2021-01-26","y":0},{"x":"2021-01-27","y":0},{"x":"2021-01-28","y":0},{"x":"2021-01-29","y":0},{"x":"2021-01-30","y":0},{"x":"2021-01-31","y":0},{"x":"2021-02-01","y":0},{"x":"2021-02-02","y":0},{"x":"2021-02-03","y":0},{"x":"2021-02-04","y":0},{"x":"2021-02-05","y":0},{"x":"2021-02-06","y":0},{"x":"2021-02-07","y":0},{"x":"2021-02-08","y":0},{"x":"2021-02-09","y":0},{"x":"2021-02-10","y":0},{"x":"2021-02-11","y":0},{"x":"2021-02-12","y":0},{"x":"2021-02-13","y":0},{"x":"2021-02-14","y":0},{"x":"2021-02-15","y":0},{"x":"2021-02-16","y":0},{"x":"2021-02-17","y":0},{"x":"2021-02-18","y":0},{"x":"2021-02-19","y":0},{"x":"2021-02-20","y":0},{"x":"2021-02-21","y":0},{"x":"2021-02-22","y":0},{"x":"2021-02-23","y":0},{"x":"2021-02-24","y":0},{"x":"2021-02-25","y":0},{"x":"2021-02-26","y":0},{"x":"2021-02-27","y":0},{"x":"2021-02-28","y":0},{"x":"2021-03-01","y":0},{"x":"2021-03-02","y":0},{"x":"2021-03-03","y":0},{"x":"2021-03-04","y":0},{"x":"2021-03-05","y":0},{"x":"2021-03-06","y":0},{"x":"2021-03-07","y":0},{"x":"2021-03-08","y":0},{"x":"2021-03-09","y":0},{"x":"2021-03-10","y":0},{"x":"2021-03-11","y":0},{"x":"2021-03-12","y":0},{"x":"2021-03-13","y":0},{"x":"2021-03-14","y":0},{"x":"2021-03-15","y":0},{"x":"2021-03-16","y":0},{"x":"2021-03-17","y":0},{"x":"2021-03-18","y":0},{"x":"2021-03-19","y":0},{"x":"2021-03-20","y":0},{"x":"2021-03-21","y":0},{"x":"2021-03-22","y":0},{"x":"2021-03-23","y":0},{"x":"2021-03-24","y":0},{"x":"2021-03-25","y":0},{"x":"2021-03-26","y":0},{"x":"2021-03-27","y":0},{"x":"2021-03-28","y":0},{"x":"2021-03-29","y":0},{"x":"2021-03-30","y":0},{"x":"2021-03-31","y":0},{"x":"2021-04-01","y":0},{"x":"2021-04-02","y":0},{"x":"2021-04-03","y":0},{"x":"2021-04-04","y":0},{"x":"2021-04-05","y":0},{"x":"2021-04-06","y":0},{"x":"2021-04-07","y":0},{"x":"2021-04-08","y":0},{"x":"2021-04-09","y":0},{"x":"2021-04-10","y":0},{"x":"2021-04-11","y":0},{"x":"2021-04-12","y":0},{"x":"2021-04-13","y":0},{"x":"2021-04-14","y":0},{"x":"2021-04-15","y":0},{"x":"2021-04-16","y":0},{"x":"2021-04-17","y":0},{"x":"2021-04-18","y":0},{"x":"2021-04-19","y":0},{"x":"2021-04-20","y":0},{"x":"2021-04-21","y":0},{"x":"2021-04-22","y":0},{"x":"2021-04-23","y":0},{"x":"2021-04-24","y":0},{"x":"2021-04-25","y":0},{"x":"2021-04-26","y":0},{"x":"2021-04-27","y":0},{"x":"2021-04-28","y":0},{"x":"2021-04-29","y":0},{"x":"2021-04-30","y":0},{"x":"2021-05-01","y":0},{"x":"2021-05-02","y":0},{"x":"2021-05-03","y":0},{"x":"2021-05-04","y":0},{"x":"2021-05-05","y":0},{"x":"2021-05-06","y":0},{"x":"2021-05-07","y":0},{"x":"2021-05-08","y":0},{"x":"2021-05-09","y":0},{"x":"2021-05-10","y":0},{"x":"2021-05-11","y":0},{"x":"2021-05-12","y":0},{"x":"2021-05-13","y":0},{"x":"2021-05-14","y":0},{"x":"2021-05-15","y":0},{"x":"2021-05-16","y":0},{"x":"2021-05-17","y":0},{"x":"2021-05-18","y":"0.50"},{"x":"2021-05-19","y":0},{"x":"2021-05-20","y":0},{"x":"2021-05-21","y":0},{"x":"2021-05-22","y":0},{"x":"2021-05-23","y":0},{"x":"2021-05-24","y":0},{"x":"2021-05-25","y":0},{"x":"2021-05-26","y":0},{"x":"2021-05-27","y":0},{"x":"2021-05-28","y":0},{"x":"2021-05-29","y":0},{"x":"2021-05-30","y":0},{"x":"2021-05-31","y":0},{"x":"2021-06-01","y":0},{"x":"2021-06-02","y":0},{"x":"2021-06-03","y":0},{"x":"2021-06-04","y":0},{"x":"2021-06-05","y":0},{"x":"2021-06-06","y":0},{"x":"2021-06-07","y":0},{"x":"2021-06-08","y":0},{"x":"2021-06-09","y":0},{"x":"2021-06-10","y":0},{"x":"2021-06-11","y":0},{"x":"2021-06-12","y":0},{"x":"2021-06-13","y":0},{"x":"2021-06-14","y":0},{"x":"2021-06-15","y":0},{"x":"2021-06-16","y":0},{"x":"2021-06-17","y":0},{"x":"2021-06-18","y":0},{"x":"2021-06-19","y":0},{"x":"2021-06-20","y":0},{"x":"2021-06-21","y":0},{"x":"2021-06-22","y":0},{"x":"2021-06-23","y":0},{"x":"2021-06-24","y":0},{"x":"2021-06-25","y":0},{"x":"2021-06-26","y":0},{"x":"2021-06-27","y":0},{"x":"2021-06-28","y":0},{"x":"2021-06-29","y":0},{"x":"2021-06-30","y":0},{"x":"2021-07-01","y":0},{"x":"2021-07-02","y":0},{"x":"2021-07-03","y":"1.00"},{"x":"2021-07-04","y":0},{"x":"2021-07-05","y":0},{"x":"2021-07-06","y":0},{"x":"2021-07-07","y":0},{"x":"2021-07-08","y":0},{"x":"2021-07-09","y":0},{"x":"2021-07-10","y":"4.00"},{"x":"2021-07-11","y":0},{"x":"2021-07-12","y":0},{"x":"2021-07-13","y":0},{"x":"2021-07-14","y":0},{"x":"2021-07-15","y":0},{"x":"2021-07-16","y":0},{"x":"2021-07-17","y":0},{"x":"2021-07-18","y":"2.00"},{"x":"2021-07-19","y":0},{"x":"2021-07-20","y":0},{"x":"2021-07-21","y":0},{"x":"2021-07-22","y":0},{"x":"2021-07-23","y":0},{"x":"2021-07-24","y":0},{"x":"2021-07-25","y":0},{"x":"2021-07-26","y":0},{"x":"2021-07-27","y":0},{"x":"2021-07-28","y":0},{"x":"2021-07-29","y":0},{"x":"2021-07-30","y":0},{"x":"2021-07-31","y":0},{"x":"2021-08-01","y":0},{"x":"2021-08-02","y":0},{"x":"2021-08-03","y":0},{"x":"2021-08-04","y":0},{"x":"2021-08-05","y":0},{"x":"2021-08-06","y":0},{"x":"2021-08-07","y":0},{"x":"2021-08-08","y":0},{"x":"2021-08-09","y":0},{"x":"2021-08-10","y":0},{"x":"2021-08-11","y":0},{"x":"2021-08-12","y":0},{"x":"2021-08-13","y":0},{"x":"2021-08-14","y":0},{"x":"2021-08-15","y":0},{"x":"2021-08-16","y":0},{"x":"2021-08-17","y":0},{"x":"2021-08-18","y":0},{"x":"2021-08-19","y":0},{"x":"2021-08-20","y":0},{"x":"2021-08-21","y":"0.75"},{"x":"2021-08-22","y":"0.00"},{"x":"2021-08-23","y":0}],
        },
      ],
    };
  }

  componentDidMount() {
    this.setState((state, props) => {
      return {
        series: [
          { 
            name: `Points spent on ${props.tagName} todos`,
            data: props.seriesData
          }
        ]
      }
    });
  }

  componentDidUpdate(prevProps) {
    if (this.props.seriesData !== prevProps.seriesData) {
      this.setState((state, props) => {
        return {
          series: [
            {
              name: `Points spent on ${props.tagName} todos`,
              data: props.seriesData
            }
          ]
        }
      });
    }
  }

  render() {
    return (
      <Chart
        options={this.state.options}
        series={this.state.series}
        type="bar"
        width="100%"
        height="200"
      />
    );
  }
}

export default ApexchartsBar;
